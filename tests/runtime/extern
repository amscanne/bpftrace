# This only tests for the presence of mangled rust probe names. We need to add
# support for automatically unmangling the names (and include the 'rust'
# language type).
NAME uprobes - list rust uprobes (mangled)
REQUIRES testprogs/extern/rust/debug/test
RUN {{BPFTRACE}} -l 'uprobe:./testprogs/extern/rust/debug/test:*'
EXPECT_REGEX uprobe:./testprogs/extern/rust/debug/test:.*fun1

# This only tests for the presence of the builtin symbol `runtime.schedule`.
# Argument unpacking and other things will *not* be supported in Go for a
# while, since the calling convention is different. But useful analysis can
# still be done with the basics.
NAME uprobes - list Go uprobes (no arguments)
REQUIRES testprogs/extern/go/test
RUN {{BPFTRACE}} -l 'uprobe:./testprogs/extern/go/test:*'
EXPECT_REGEX uprobe:./testprogs/extern/go/test:runtime.schedule
